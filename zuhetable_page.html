<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>荷载组合交互式计算表格</title>
	<link rel="stylesheet" href="./css/second_styles.css">
    
</head>
<body>
	<div class="navbar">
		<nav>
			<a href="index.html">首页</a>	    
			<a href="jubushouya_page.html">支架立柱下混凝土构件局部受压承载力计算</a>
			<a href="hntceyali_page.html">新浇筑混凝土侧压力计算</a>
			<a href="fenghezai_page.html">模板支架风荷载计算</a>
			<a href="about.html">关于作者</a>		
			<!-- 可以添加更多导航项 -->
	    </nav>
	</div>
    <header> 		
		<h2>荷载组合交互式计算</h2>
		<hr />
		<h3>主要依据规范</h3>
		<h4>依据规范【1】：GB 50009-2012 建筑结构荷载规范</h4>
		<h4>依据规程【2】：TB 10110-2011 铁路混凝土梁支架法现浇施工技术规程</h4>
		<hr />
		<h3>荷载数据</h3>
    </header>
	<div class = "contan_second">
	<!--计算表格-->
	<table id="calcTable">
		<thead>
			<tr>
				<th>荷载名称</th>
				<th>荷载编号</th>
				<th>标准值</th>
				<th>分项系数</th>
				<th>组合系数</th>
				<th>组合值</th>
			</tr>
		</thead>
		<tbody>
			 <!-- 作用工况：荷载作用在架体顶部 -->
			<tr>
				<td>浇筑体自重</td>
				<td>（1）</td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.3"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.0"></td>
				<td><span class="result">0</span></td>
			</tr>       
			<tr>
				<td>模板结构自重</td>
				<td>（2）</td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.3"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.0"></td>
				<td><span class="result">0</span></td>
			</tr>		
			<tr>
				<td>施工人员、材料及机具荷载</td>
				<td>（3）</td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.5"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.0"></td>
				<td><span class="result">0</span></td>
			</tr>
			<tr>
				<td>振捣混凝土时产生的荷载</td>
				<td>（4）</td>							
				<td><input type="number" class="numInput" oninput="calculateRow(this)"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.5"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.0"></td>
				<td><span class="result">0</span></td>
			</tr>
			<tr>
				<td>浇筑混凝土时产生的冲击荷载</td>
				<td>（5）</td>							
				<td><input type="number" class="numInput" oninput="calculateRow(this)"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.5"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.0"></td>
				<td><span class="result">0</span></td>
			</tr>
			<tr>
				<td>新浇筑混凝土对侧面模板的压力</td>
				<td>（6）</td>							
				<td><input type="number" class="numInput" oninput="calculateRow(this)"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.5"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.0"></td>
				<td><span class="result">0</span></td>
			</tr>
			<tr>
				<td>风荷载</td>
				<td>（7）</td>							
				<td><input type="number" class="numInput" oninput="calculateRow(this)"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.5"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.0"></td>
				<td><span class="result">0</span></td>
			</tr>
			<tr>
				<td>水流荷载</td>
				<td>（8）</td>							
				<td><input type="number" class="numInput" oninput="calculateRow(this)"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.5"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.0"></td>
				<td><span class="result">0</span></td>
			</tr>
			<tr>
				<td>船舶及漂浮物冲击荷载</td>
				<td>（9）</td>							
				<td><input type="number" class="numInput" oninput="calculateRow(this)"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.5"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.0"></td>
				<td><span class="result">0</span></td>
			</tr>														
			<tr>
				<td>其他荷载</td>
				<td>（10）</td>							
				<td><input type="number" class="numInput" oninput="calculateRow(this)"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.5"></td>
				<td><input type="number" class="numInput" oninput="calculateRow(this)" value="1.0"></td>
				<td><span class="result">0</span></td>
			</tr>
		</tbody>
	</table>
	<header>
		<hr />
		<h3>计算工况</h3>		
	</header>
	<table id="summary-table">
	    <thead>
	        <tr>
	            <th>计算强度</th>
				<th>组合项</th>
	            <th>结果</th>	            
	        </tr>
	    </thead>
	    <tbody>
	        <tr>
	            <td id ="name11">计算满堂式支架</td>
	            <td id ="name12">γ<sub>G</sub>x[（1）+（2）]+γ<sub>Q</sub>x[(3)+(4)+(5)+(10)]</td>
	            <td><span id ="sum1">0.00</span></td>
	        </tr>
	        <tr>
	            <td id ="name21">计算梁柱式支架</td>
	            <td id ="name22">γ<sub>G</sub>x[（1）+（2）]+γ<sub>Q</sub>x[(3)+(7)+(8)+(10)]</td>
	            <td><span id ="sum2">0.00</span></td>
	        </tr>
	        <tr>
	            <td id ="name31">计算底模板、模板下纵横梁</td>
	            <td id ="name32">γ<sub>G</sub>x[（1）+（2）]+γ<sub>Q</sub>x[(3)+(4)+(5)+(10)]</td>
	            <td><span id ="sum3">0.00</span></td>
	        </tr>
	    </tbody>
	</table>
		<!--功能-->		
		<button onclick="saveData()">保存荷载数据</button>	
		<button onclick="loadData()">读取荷载数据</button>	
	</div>
	
	<div class="footer">
		
	</div>
	<script>
		function calculateRow(inputElement) {
			const row = inputElement.parentElement.parentElement;
			const cells = row.cells;        
			// 获取第3、4、5列的值
			const num1 = parseFloat(cells[2].querySelector('input').value) || 0;
			const num2 = parseFloat(cells[3].querySelector('input').value) || 0;
			const num3 = parseFloat(cells[4].querySelector('input').value) || 0;        
			// 计算结果并显示在第6列
			const result = num1 * num2 * num3;
			cells[5].querySelector('span').textContent = result.toFixed(2);
			<!--更新汇总表-->
			updateSummaryTable();
		}
		// 初始化计算所有行的结果
		document.querySelectorAll('#calcTable tbody tr').forEach(row => {
			calculateRow(row.querySelector('input'));});		
		function updateSummaryTable() {
		        const rows = document.querySelectorAll('#calcTable tbody tr');
		        let sum1 = 0;
		        let sum2 = 0;
				let sum3 = 0;
		        // 计算累计值1（第1~5 , 10行的最后一列）
		        [0,1,2,3,4,9].forEach(index => {
		            const cell = rows[index].cells[5].querySelector('span');
		            sum1 += parseFloat(cell.textContent) || 0;
		        });
		
		        // 计算累计值2（第1,2, 3, 7, 8, 10行的最后一列）
		        [0,1,2,6,7,9].forEach(index => {
		            const cell = rows[index].cells[5].querySelector('span');
		            sum2 += parseFloat(cell.textContent) || 0;
		        });
				// 计算累计值3（第1~5 , 10行的最后一列）
				[0,1,2,3,4,9].forEach(index => {
		            if (rows[index]) { // 确保索引存在
		                const cell = rows[index].cells[5].querySelector('span');
		                sum3 += parseFloat(cell.textContent) || 0;}
		        });		
		        // 更新汇总表中的值
		        document.getElementById('sum1').textContent = sum1.toFixed(2);
		        document.getElementById('sum2').textContent = sum2.toFixed(2);
				document.getElementById('sum3').textContent = sum3.toFixed(2);				
		    }		
		function saveData() {
			const data = [];
			const rows = document.querySelectorAll('#calcTable tbody tr');
			rows.forEach(row => {
				const inputs = row.querySelectorAll('.numInput');
				const values = Array.from(inputs).map(input => input.value);
				const resultSpan = row.querySelector('.result');
				values.push(resultSpan.textContent);
				data.push(values);
			});
			localStorage.setItem('calcTableData', JSON.stringify(data));
			alert('数据已保存！');
		}
		<!--读取临时存储数据
		function loadData() {
			const savedData = JSON.parse(localStorage.getItem('calcTableData'));
			if (savedData) {
				const rows = document.querySelectorAll('#calcTable tbody tr');
				rows.forEach((row, index) => {
					const inputs = row.querySelectorAll('.numInput');
					const resultSpan = row.querySelector('.result');
					if (savedData[index]) {
						inputs.forEach((input, i) => {
							input.value = savedData[index][i];
						});
						resultSpan.textContent = savedData[index][inputs.length];
					}
				});
				alert('数据已加载！');
			} else {
				alert('没有找到保存的数据！');
			}
		}
		
	</script>

	</body>
</html>


